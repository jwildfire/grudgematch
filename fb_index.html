<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football League - Overall Standings Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        .timestamp {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 30px;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #34495e;
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        
        th:not(:first-child) {
            transition: background-color 0.2s ease;
        }
        
        th:not(:first-child):hover {
            background-color: #2c3e50;
        }
        
        th.sort-asc, th.sort-desc {
            background-color: #2980b9;
        }
        
        th.sort-asc:hover, th.sort-desc:hover {
            background-color: #3498db;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e8f4f8;
        }
        
        .rank {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .owner-name {
            font-weight: bold;
            color: #2980b9;
        }
        
        .win-pct {
            font-weight: bold;
            border-radius: 4px;
            padding: 4px 8px;
        }
        
        .excellent { background-color: #2ecc71; color: white; }
        .good { background-color: #f39c12; color: white; }
        .average { background-color: #95a5a6; color: white; }
        .below-average { background-color: #e67e22; color: white; }
        .poor { background-color: #e74c3c; color: white; }
        
        .record {
            font-family: 'Courier New', monospace;
            background-color: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
        }
        
        .highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .highlight-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #e74c3c;
        }
        
        .highlight-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .highlight-value {
            font-size: 1.2em;
            color: #e74c3c;
        }
        
        .legend {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            table {
                font-size: 0.9em;
            }
            
            .summary-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>ÔøΩ Fantasy Football League<br>Overall Standings Report</h1>
        <div class="timestamp">Generated on October 21, 2025 at 12:54 AM</div>
        <div style="text-align: center; margin: 10px 0;">
            <a href="https://github.com/jwildfire/grudgematch" target="_blank" style="color: #2196F3; text-decoration: none; font-size: 14px;">
                üì± View Source Code on GitHub
            </a>
        </div>
        
        <h2>üìä League Summary</h2>
        <div class="summary-stats">
            <div class="stat-card">
                <div class="stat-number">2</div>
                <div class="stat-label">Total Owners</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">96</div>
                <div class="stat-label">Total Seasons Played</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">1,830</div>
                <div class="stat-label">Total Games Played</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">2</div>
                <div class="stat-label">Veteran Owners (5+ seasons)</div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-title">Win Percentage Legend:</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color excellent"></div>
                    <span>Excellent (60%+)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color good"></div>
                    <span>Good (55-59%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color average"></div>
                    <span>Average (50-54%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color below-average"></div>
                    <span>Below Average (45-49%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color poor"></div>
                    <span>Poor (&lt;45%)</span>
                </div>
            </div>
        </div>
        
        <h2>üèÜ Career Standings</h2>
        <table>
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Owner</th>
                    <th>Seasons</th>
                    <th>Record</th>
                    <th>Win %</th>
                    <th>Avg Rank</th>
                    <th>Championships</th>
                    <th>Finals</th>
                    <th>Playoffs</th>
                    <th>Total Games</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="rank">#1</td>
                    <td class="owner-name">Jeremy</td>
                    <td>9</td>
                    <td class="record">107-63-1</td>
                    <td><span class="win-pct excellent">0.626</span></td>
                    <td>4.4</td>
                    <td>1</td>
                    <td>3</td>
                    <td>5</td>
                    <td>171</td>
                </tr>
                <tr>
                    <td class="rank">#2</td>
                    <td class="owner-name">Unknown</td>
                    <td>87</td>
                    <td class="record">801-845-13</td>
                    <td><span class="win-pct below-average">0.483</span></td>
                    <td>6.0</td>
                    <td>8</td>
                    <td>15</td>
                    <td>31</td>
                    <td>1659</td>
                </tr>
            </tbody>
        </table>
        
        <h2>üìà Wins by Year Trends</h2>
        <p style="margin-bottom: 20px; color: #7f8c8d;">
            Interactive chart showing win trends over time. Only owners with 5+ seasons shown by default. 
            Use the dropdown to highlight a specific owner, or click legend items to show/hide additional owners.
            <br><strong>Chart symbols:</strong> ‚óè = Playoff season (rank ‚â§ 4), ‚óã = Non-playoff season (rank > 4)
        </p>
        <div style="margin-bottom: 15px;">
            <label for="teamHighlight" style="margin-right: 10px; font-weight: bold; color: #2c3e50;">Highlight Team:</label>
            <select id="teamHighlight" onchange="highlightTeam(this.value)" style="
                padding: 8px 12px; 
                border: 1px solid #bdc3c7; 
                border-radius: 4px; 
                background-color: white; 
                font-size: 14px; 
                color: #2c3e50;
                cursor: pointer;
                min-width: 200px;
            ">
                <option value="None">None (Show All)</option>
            </select>
        </div>
        <div style="background-color: white; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); height: 500px;">
            <canvas id="winsChart"></canvas>
        </div>
        
        <h2>üìä Mean Winning Percentage by Rank</h2>
        <div style="background-color: white; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); height: 400px;">
            <canvas id="boxplotChart"></canvas>
        </div>
        
        <h2>üéØ Playoff Probability Calculator</h2>
        <div style="background-color: white; padding: 30px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <p style="text-align: center; margin-bottom: 25px; color: #666; font-size: 14px;">
                Based on historical data from 96 seasons, see your chances of making the playoffs
            </p>
            
            <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 20px;">
                <label for="winPctSlider" style="font-weight: bold; color: #333;">Win Percentage:</label>
                <input type="range" id="winPctSlider" min="0" max="100" value="50" step="1" 
                       style="flex: 1; max-width: 300px; height: 8px; border-radius: 5px; background: #ddd; outline: none;">
                <span id="winPctDisplay" style="font-weight: bold; color: #2196F3; min-width: 60px;">50.0%</span>
            </div>
            
            <div style="text-align: center;">
                <div style="font-size: 48px; font-weight: bold; color: #4CAF50; margin: 10px 0;" id="playoffProbability">
                    ---%
                </div>
                <div style="color: #666; font-size: 16px;" id="playoffMessage">
                    Chance of making playoffs
                </div>
                <div style="color: #999; font-size: 12px; margin-top: 10px;" id="sampleSize">
                    Based on historical data
                </div>
            </div>
        </div>
        
        <h2>üìà Playoff Odds by Win Percentage</h2>
        <div style="background-color: white; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); height: 400px;">
            <canvas id="cumulativePlayoffChart"></canvas>
        </div>
        
        <h2>üéØ League Highlights</h2>
        <div class="highlights">
            <div class="highlight-card">
                <div class="highlight-title">ü•á Best Win Percentage</div>
                <div class="highlight-value">Jeremy</div>
                <div>0.626 (107-63-1)</div>
            </div>
            
            <div class="highlight-card">
                <div class="highlight-title">üìâ Lowest Win Percentage</div>
                <div class="highlight-value">Unknown</div>
                <div>0.483 (801-845-13)</div>
            </div>
            
            <div class="highlight-card">
                <div class="highlight-title">üèÜ Most Career Wins</div>
                <div class="highlight-value">Unknown</div>
                <div>801 wins in 87 seasons</div>
            </div>
            
            <div class="highlight-card">
                <div class="highlight-title">üìà Most Career Losses</div>
                <div class="highlight-value">Unknown</div>
                <div>845 losses in 87 seasons</div>
            </div>
            
            <div class="highlight-card">
                <div class="highlight-title">‚è±Ô∏è Most Experienced</div>
                <div class="highlight-value">Unknown</div>
                <div>87 seasons played</div>
            </div>
            
            <div class="highlight-card">
                <div class="highlight-title">üéØ League Average</div>
                <div class="highlight-value">0.554</div>
                <div>Average win percentage across all owners</div>
            </div>
        </div>
        
        <h2>üìà Performance Analysis</h2>
        <p><strong>Elite Performers (60%+ win rate):</strong> 1 owners</p>
        <p><strong>Above Average (55%+ win rate):</strong> 1 owners</p>
        <p><strong>At or Above .500:</strong> 1 owners</p>
        <p><strong>Below .500:</strong> 1 owners</p>
        
        <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #ecf0f1; text-align: center; color: #7f8c8d;">
            <p>üìä Report generated by Fantasy Football League Analytics System</p>
            <p>Data source: ownersStandingsOverall.csv</p>
        </div>
    </div>
    
    <script>
        // Table sorting functionality
        function sortTable(columnIndex, dataType = 'string') {
            const table = document.querySelector('table');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            const headerRow = table.querySelector('thead tr');
            const headers = headerRow.querySelectorAll('th');
            const currentHeader = headers[columnIndex];
            
            // Determine sort direction BEFORE removing classes
            const isCurrentlyAsc = currentHeader.classList.contains('sort-asc');
            const isCurrentlyDesc = currentHeader.classList.contains('sort-desc');
            const isAscending = !isCurrentlyAsc; // If not currently ascending, make it ascending
            
            // Remove existing sort indicators from ALL headers
            headers.forEach(header => {
                header.classList.remove('sort-asc', 'sort-desc');
                header.innerHTML = header.innerHTML.replace(/ [‚ñ≤‚ñº]/g, '');
            });
            
            // Sort rows
            rows.sort((a, b) => {
                let aValue = a.cells[columnIndex].textContent.trim();
                let bValue = b.cells[columnIndex].textContent.trim();
                
                // Handle different data types
                if (dataType === 'number') {
                    aValue = parseFloat(aValue) || 0;
                    bValue = parseFloat(bValue) || 0;
                } else if (dataType === 'percentage') {
                    aValue = parseFloat(aValue) || 0;
                    bValue = parseFloat(bValue) || 0;
                } else if (dataType === 'record') {
                    // Extract wins from record (e.g., "107-63-1" -> 107)
                    const aWins = parseInt(aValue.split('-')[0]) || 0;
                    const bWins = parseInt(bValue.split('-')[0]) || 0;
                    aValue = aWins;
                    bValue = bWins;
                }
                
                if (aValue < bValue) return isAscending ? -1 : 1;
                if (aValue > bValue) return isAscending ? 1 : -1;
                return 0;
            });
            
            // Update table
            rows.forEach(row => tbody.appendChild(row));
            
            // Update rank column
            rows.forEach((row, index) => {
                row.cells[0].textContent = `#${index + 1}`;
            });
            
            // Add sort indicator
            const indicator = isAscending ? ' ‚ñ≤' : ' ‚ñº';
            currentHeader.innerHTML += indicator;
            currentHeader.classList.add(isAscending ? 'sort-asc' : 'sort-desc');
        }
        
        // Add click handlers to table headers
        document.addEventListener('DOMContentLoaded', function() {
            const headers = document.querySelectorAll('th');
            headers.forEach((header, index) => {
                if (index === 0) return; // Skip rank column
                
                header.style.cursor = 'pointer';
                header.style.userSelect = 'none';
                header.title = 'Click to sort';
                
                const dataType = index === 2 ? 'number' :  // Seasons
                               index === 3 ? 'record' :   // Record  
                               index === 4 ? 'percentage' : // Win %
                               index === 5 ? 'number' :   // Total Games
                               index === 6 ? 'number' :   // Avg Games/Season
                               'string';                   // Owner name
                
                header.addEventListener('click', () => sortTable(index, dataType));
            });
        });
        
        // Chart data
        const chartData = {"labels": [2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025], "datasets": [{"label": "Unknown", "data": [7, 2, 14, 3, 11, 10, 7, 9, 11], "borderColor": "#3498db", "backgroundColor": "#3498db20", "tension": 0.1, "spanGaps": true, "hidden": false, "pointBackgroundColor": ["#ffffff", "#ffffff", "#3498db", "#ffffff", "#3498db", "#ffffff", "#ffffff", "#ffffff", "#3498db"], "pointBorderColor": ["#3498db", "#3498db", "#3498db", "#3498db", "#3498db", "#3498db", "#3498db", "#3498db", "#3498db"], "pointRadius": 6, "pointHoverRadius": 8, "pointBorderWidth": 2}, {"label": "Jeremy", "data": [9, 11, 14, 14, 9, 14, 12, 10, 14], "borderColor": "#e74c3c", "backgroundColor": "#e74c3c20", "tension": 0.1, "spanGaps": true, "hidden": false, "pointBackgroundColor": ["#e74c3c", "#ffffff", "#e74c3c", "#e74c3c", "#ffffff", "#e74c3c", "#ffffff", "#ffffff", "#e74c3c"], "pointBorderColor": ["#e74c3c", "#e74c3c", "#e74c3c", "#e74c3c", "#e74c3c", "#e74c3c", "#e74c3c", "#e74c3c", "#e74c3c"], "pointRadius": 6, "pointHoverRadius": 8, "pointBorderWidth": 2}]};
        
        // Create the chart
        const ctx = document.getElementById('winsChart').getContext('2d');
        const winsChart = new Chart(ctx, {
            type: 'line',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Wins by Year Trends (Veterans: 5+ Seasons)',
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            padding: 10,
                            fontSize: 12
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            title: function(context) {
                                return 'Year: ' + context[0].label;
                            },
                            label: function(context) {
                                if (context.parsed.y === null) {
                                    return context.dataset.label + ': Did not play';
                                }
                                return context.dataset.label + ': ' + context.parsed.y + ' wins';
                            }
                        }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Year',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        grid: {
                            display: true,
                            color: 'rgba(0,0,0,0.1)'
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Wins',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        beginAtZero: true,
                        grid: {
                            display: true,
                            color: 'rgba(0,0,0,0.1)'
                        }
                    }
                },
                elements: {
                    point: {
                        radius: 4,
                        hoverRadius: 6
                    },
                    line: {
                        borderWidth: 2,
                        hoverBorderWidth: 3
                    }
                }
            }
        });
        
        // Store original colors for highlight effects
        winsChart.data.datasets.forEach(dataset => {
            dataset.originalBorderColor = dataset.borderColor;
            dataset.originalBackgroundColor = dataset.backgroundColor;
        });
        
        // Function to highlight a specific team
        function highlightTeam(teamName) {
            const datasets = winsChart.data.datasets;
            
            if (teamName === 'None' || teamName === '') {
                // Reset all lines to original state
                datasets.forEach((dataset) => {
                    dataset.borderWidth = 2;
                    dataset.pointRadius = 4;
                    dataset.pointHoverRadius = 6;
                    // Restore original colors
                    if (dataset.originalBorderColor) {
                        dataset.borderColor = dataset.originalBorderColor;
                        dataset.backgroundColor = dataset.originalBackgroundColor;
                    }
                });
            } else {
                // Highlight selected team and dim others
                datasets.forEach((dataset) => {
                    if (dataset.label === teamName) {
                        // Highlight the selected team
                        dataset.borderWidth = 4;
                        dataset.pointRadius = 6;
                        dataset.pointHoverRadius = 8;
                        // Restore original color
                        if (dataset.originalBorderColor) {
                            dataset.borderColor = dataset.originalBorderColor;
                            dataset.backgroundColor = dataset.originalBackgroundColor;
                        }
                    } else {
                        // Dim other teams
                        dataset.borderWidth = 1;
                        dataset.pointRadius = 2;
                        dataset.pointHoverRadius = 4;
                        // Apply gray color
                        dataset.borderColor = 'rgba(150, 150, 150, 0.3)';
                        dataset.backgroundColor = 'rgba(150, 150, 150, 0.1)';
                    }
                });
            }
            
            winsChart.update('none');
        }
        
        // Populate the dropdown with team names
        const teamSelect = document.getElementById('teamHighlight');
        const allTeams = winsChart.data.datasets.map(dataset => dataset.label).sort();
        
        allTeams.forEach(teamName => {
            const option = document.createElement('option');
            option.value = teamName;
            option.textContent = teamName;
            teamSelect.appendChild(option);
        });
        
        // Boxplot data
        const boxplotData = {"labels": ["Rank 1", "Rank 2", "Rank 3", "Rank 4", "Rank 5", "Rank 6", "Rank 7", "Rank 8", "Rank 9", "Rank 10", "Rank 11", "Rank 12"], "data": [{"mean": 0.7212638076673166, "count": 9}, {"mean": 0.7231156595191685, "count": 9}, {"mean": 0.6711582196231318, "count": 9}, {"mean": 0.6147579597141001, "count": 9}, {"mean": 0.464546783625731, "count": 9}, {"mean": 0.48732131254061073, "count": 9}, {"mean": 0.43901072124756335, "count": 9}, {"mean": 0.36092430149447696, "count": 9}, {"mean": 0.3276397011046134, "count": 9}, {"mean": 0.32915042235217673, "count": 9}, {"mean": 0.2833333333333334, "count": 3}, {"mean": 0.18333333333333335, "count": 3}], "beeswarm": [{"x": 2, "y": 0.5263157894736842, "team": "Austin CurryBrons", "owner": "Unknown", "year": 2017, "record": "10-9", "rank": 3}, {"x": 9, "y": 0.3684210526315789, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2017, "record": "7-12", "rank": 10}, {"x": 1, "y": 0.7894736842105263, "team": "Joe Biden Would Cross You Over", "owner": "Unknown", "year": 2017, "record": "15-4", "rank": 2}, {"x": 0, "y": 0.7894736842105263, "team": "Lilongwe 327", "owner": "Unknown", "year": 2017, "record": "15-4", "rank": 1}, {"x": 7, "y": 0.3157894736842105, "team": "Mwambo Rd TIBA", "owner": "Unknown", "year": 2017, "record": "6-13", "rank": 8}, {"x": 5, "y": 0.47368421052631576, "team": "Team Carter", "owner": "Unknown", "year": 2017, "record": "9-10", "rank": 6}, {"x": 6, "y": 0.47368421052631576, "team": "Team Nye", "owner": "Unknown", "year": 2017, "record": "9-10", "rank": 7}, {"x": 3, "y": 0.47368421052631576, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2017, "record": "9-10", "rank": 4}, {"x": 4, "y": 0.42105263157894735, "team": "UTEP 2 Steps", "owner": "Unknown", "year": 2017, "record": "8-11", "rank": 5}, {"x": 8, "y": 0.3684210526315789, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2017, "record": "7-12", "rank": 9}, {"x": 0, "y": 0.8, "team": "Austin CurryBrons", "owner": "Unknown", "year": 2018, "record": "16-4", "rank": 1}, {"x": 7, "y": 0.3, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2018, "record": "6-14", "rank": 8}, {"x": 11, "y": 0.35, "team": "Joe Biden Would Cross You Over", "owner": "Unknown", "year": 2018, "record": "7-13", "rank": 12}, {"x": 2, "y": 0.7, "team": "Lilongwe 327", "owner": "Unknown", "year": 2018, "record": "14-6", "rank": 3}, {"x": 10, "y": 0.25, "team": "Mwambo Rd TIBA", "owner": "Unknown", "year": 2018, "record": "5-15", "rank": 11}, {"x": 1, "y": 0.9, "team": "Team Carter", "owner": "Unknown", "year": 2018, "record": "18-2", "rank": 2}, {"x": 9, "y": 0.4, "team": "Team Davidai", "owner": "Unknown", "year": 2018, "record": "8-12", "rank": 10}, {"x": 4, "y": 0.55, "team": "Team Reddy", "owner": "Unknown", "year": 2018, "record": "11-9", "rank": 5}, {"x": 3, "y": 0.6, "team": "Teh Mehs", "owner": "Unknown", "year": 2018, "record": "12-8", "rank": 4}, {"x": 6, "y": 0.55, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2018, "record": "11-9", "rank": 7}, {"x": 5, "y": 0.5, "team": "UTEP 2 Steps", "owner": "Unknown", "year": 2018, "record": "10-10", "rank": 6}, {"x": 8, "y": 0.1, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2018, "record": "2-18", "rank": 9}, {"x": 6, "y": 0.35, "team": "Ari 471", "owner": "Unknown", "year": 2019, "record": "7-13", "rank": 7}, {"x": 7, "y": 0.6, "team": "Austin CurryBrons", "owner": "Unknown", "year": 2019, "record": "12-8", "rank": 8}, {"x": 10, "y": 0.3, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2019, "record": "6-14", "rank": 11}, {"x": 5, "y": 0.55, "team": "Beto Would Cross You Over", "owner": "Unknown", "year": 2019, "record": "11-9", "rank": 6}, {"x": 9, "y": 0.5, "team": "Bull City Bangers", "owner": "Unknown", "year": 2019, "record": "10-10", "rank": 10}, {"x": 1, "y": 0.8, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2019, "record": "16-4", "rank": 2}, {"x": 4, "y": 0.55, "team": "Mwambo Rd TIBA", "owner": "Unknown", "year": 2019, "record": "11-9", "rank": 5}, {"x": 3, "y": 0.6, "team": "Team Carter", "owner": "Unknown", "year": 2019, "record": "12-8", "rank": 4}, {"x": 8, "y": 0.3, "team": "Teh Mehs", "owner": "Unknown", "year": 2019, "record": "6-14", "rank": 9}, {"x": 2, "y": 0.7, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2019, "record": "14-6", "rank": 3}, {"x": 11, "y": 0.05, "team": "UTEP 2 Steps", "owner": "Unknown", "year": 2019, "record": "1-19", "rank": 12}, {"x": 0, "y": 0.7, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2019, "record": "14-6", "rank": 1}, {"x": 2, "y": 0.65, "team": "Ari 471", "owner": "Unknown", "year": 2020, "record": "13-6-1", "rank": 3}, {"x": 9, "y": 0.25, "team": "Austin Football Team", "owner": "Unknown", "year": 2020, "record": "5-14-1", "rank": 10}, {"x": 4, "y": 0.45, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2020, "record": "9-10-1", "rank": 5}, {"x": 6, "y": 0.45, "team": "Bull City Bangers", "owner": "Unknown", "year": 2020, "record": "9-10-1", "rank": 7}, {"x": 8, "y": 0.4, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2020, "record": "8-11-1", "rank": 9}, {"x": 0, "y": 0.9, "team": "JMapps Stepover", "owner": "Unknown", "year": 2020, "record": "18-1-1", "rank": 1}, {"x": 10, "y": 0.3, "team": "Kawhis Laugh", "owner": "Unknown", "year": 2020, "record": "6-13-1", "rank": 11}, {"x": 5, "y": 0.45, "team": "Mwambo Rd TIBA", "owner": "Unknown", "year": 2020, "record": "9-10-1", "rank": 6}, {"x": 3, "y": 0.65, "team": "Team Carter", "owner": "Unknown", "year": 2020, "record": "13-6-1", "rank": 4}, {"x": 1, "y": 0.7, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2020, "record": "14-5-1", "rank": 2}, {"x": 7, "y": 0.35, "team": "Uncanny Logo", "owner": "Unknown", "year": 2020, "record": "7-12-1", "rank": 8}, {"x": 11, "y": 0.15, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2020, "record": "3-16-1", "rank": 12}, {"x": 2, "y": 0.6875, "team": "Ari 471", "owner": "Unknown", "year": 2021, "record": "11-5", "rank": 3}, {"x": 0, "y": 0.625, "team": "Austin Football Team", "owner": "Unknown", "year": 2021, "record": "10-6", "rank": 1}, {"x": 4, "y": 0.3125, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2021, "record": "5-11", "rank": 5}, {"x": 6, "y": 0.5625, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2021, "record": "9-7", "rank": 7}, {"x": 9, "y": 0.1875, "team": "Kawhis Laugh", "owner": "Unknown", "year": 2021, "record": "3-13", "rank": 10}, {"x": 1, "y": 0.625, "team": "Mapp Stepback", "owner": "Unknown", "year": 2021, "record": "10-6", "rank": 2}, {"x": 7, "y": 0.1875, "team": "Nowitzkis Fadeaway", "owner": "Unknown", "year": 2021, "record": "3-13", "rank": 8}, {"x": 8, "y": 0.5625, "team": "Team Carter", "owner": "Unknown", "year": 2021, "record": "9-7", "rank": 9}, {"x": 5, "y": 0.5625, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2021, "record": "9-7", "rank": 6}, {"x": 3, "y": 0.6875, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2021, "record": "11-5", "rank": 4}, {"x": 5, "y": 0.5263157894736842, "team": "Ari 471", "owner": "Unknown", "year": 2022, "record": "10-9", "rank": 6}, {"x": 1, "y": 0.5789473684210527, "team": "Austin Football Team", "owner": "Unknown", "year": 2022, "record": "11-8", "rank": 2}, {"x": 2, "y": 0.5789473684210527, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2022, "record": "11-8", "rank": 3}, {"x": 4, "y": 0.5263157894736842, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2022, "record": "10-9", "rank": 5}, {"x": 9, "y": 0.3157894736842105, "team": "Kawhis Laugh", "owner": "Unknown", "year": 2022, "record": "6-13", "rank": 10}, {"x": 7, "y": 0.2631578947368421, "team": "Mapp Stepback", "owner": "Unknown", "year": 2022, "record": "5-14", "rank": 8}, {"x": 8, "y": 0.3684210526315789, "team": "Nowitzkis Fadeaway", "owner": "Unknown", "year": 2022, "record": "7-12", "rank": 9}, {"x": 3, "y": 0.5789473684210527, "team": "Team Carter", "owner": "Unknown", "year": 2022, "record": "11-8", "rank": 4}, {"x": 0, "y": 0.7368421052631579, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2022, "record": "14-5", "rank": 1}, {"x": 6, "y": 0.5263157894736842, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2022, "record": "10-9", "rank": 7}, {"x": 5, "y": 0.3, "team": "Ari 471", "owner": "Unknown", "year": 2023, "record": "6-14", "rank": 6}, {"x": 1, "y": 0.6, "team": "Austin Football Team", "owner": "Unknown", "year": 2023, "record": "12-7-1", "rank": 2}, {"x": 0, "y": 0.75, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2023, "record": "15-5", "rank": 1}, {"x": 7, "y": 0.15, "team": "Bull City Bums", "owner": "Unknown", "year": 2023, "record": "3-16-1", "rank": 8}, {"x": 3, "y": 0.7, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2023, "record": "14-6", "rank": 4}, {"x": 4, "y": 0.45, "team": "Miami Mambas", "owner": "Unknown", "year": 2023, "record": "9-11", "rank": 5}, {"x": 2, "y": 0.8, "team": "Nowitzkis Fadeaway", "owner": "Unknown", "year": 2023, "record": "16-4", "rank": 3}, {"x": 8, "y": 0.25, "team": "Team Carter", "owner": "Unknown", "year": 2023, "record": "5-15", "rank": 9}, {"x": 6, "y": 0.6, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2023, "record": "12-8", "rank": 7}, {"x": 9, "y": 0.35, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2023, "record": "7-13", "rank": 10}, {"x": 1, "y": 0.7777777777777778, "team": "Austin Football Team", "owner": "Unknown", "year": 2024, "record": "14-4", "rank": 2}, {"x": 2, "y": 0.5555555555555556, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2024, "record": "10-8", "rank": 3}, {"x": 3, "y": 0.6111111111111112, "team": "Bull City Bums", "owner": "Unknown", "year": 2024, "record": "11-7", "rank": 4}, {"x": 5, "y": 0.4444444444444444, "team": "Fly Nye Guy", "owner": "Unknown", "year": 2024, "record": "8-10", "rank": 6}, {"x": 6, "y": 0.3333333333333333, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2024, "record": "6-12", "rank": 7}, {"x": 9, "y": 0.2222222222222222, "team": "Miami Mambas", "owner": "Unknown", "year": 2024, "record": "4-14", "rank": 10}, {"x": 8, "y": 0.3888888888888889, "team": "Nowitzkis Fadeaway", "owner": "Unknown", "year": 2024, "record": "7-11", "rank": 9}, {"x": 7, "y": 0.5555555555555556, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2024, "record": "10-8", "rank": 8}, {"x": 0, "y": 0.6111111111111112, "team": "Toso Viti Toso", "owner": "Unknown", "year": 2024, "record": "11-7", "rank": 1}, {"x": 4, "y": 0.5, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2024, "record": "9-9", "rank": 5}, {"x": 2, "y": 0.8421052631578947, "team": "Austin Football Team", "owner": "Unknown", "year": 2025, "record": "16-3", "rank": 3}, {"x": 9, "y": 0.3684210526315789, "team": "Baton Rouge Beasts", "owner": "Unknown", "year": 2025, "record": "7-12", "rank": 10}, {"x": 8, "y": 0.21052631578947367, "team": "Bull City Bums", "owner": "Unknown", "year": 2025, "record": "4-15", "rank": 9}, {"x": 5, "y": 0.5789473684210527, "team": "Fly Nye Guy", "owner": "Unknown", "year": 2025, "record": "11-8", "rank": 6}, {"x": 4, "y": 0.42105263157894735, "team": "Im Trying Jennifer", "owner": "Unknown", "year": 2025, "record": "8-11", "rank": 5}, {"x": 6, "y": 0.10526315789473684, "team": "Miami Mambas", "owner": "Unknown", "year": 2025, "record": "2-17", "rank": 7}, {"x": 7, "y": 0.5263157894736842, "team": "Nowitzkis Fadeaway", "owner": "Unknown", "year": 2025, "record": "10-9", "rank": 8}, {"x": 1, "y": 0.7368421052631579, "team": "The Penthouse Panda Bear", "owner": "Jeremy", "year": 2025, "record": "14-5", "rank": 2}, {"x": 3, "y": 0.631578947368421, "team": "Toso Viti Toso", "owner": "Unknown", "year": 2025, "record": "12-7", "rank": 4}, {"x": 0, "y": 0.5789473684210527, "team": "Utah Bootleggers", "owner": "Unknown", "year": 2025, "record": "11-8", "rank": 1}]};
        
        // Playoff probability data
        const playoffProbabilities = [{"win_pct": 0.0625, "probability": 0.0, "sample_size": 1}, {"win_pct": 0.1125, "probability": 0.0, "sample_size": 2}, {"win_pct": 0.1375, "probability": 0.0, "sample_size": 2}, {"win_pct": 0.1875, "probability": 0.0, "sample_size": 2}, {"win_pct": 0.21250000000000002, "probability": 0.0, "sample_size": 2}, {"win_pct": 0.2625, "probability": 0.0, "sample_size": 4}, {"win_pct": 0.28750000000000003, "probability": 0.0, "sample_size": 5}, {"win_pct": 0.3125, "probability": 0.0, "sample_size": 3}, {"win_pct": 0.3375, "probability": 0.0, "sample_size": 5}, {"win_pct": 0.36250000000000004, "probability": 0.0, "sample_size": 4}, {"win_pct": 0.3875, "probability": 0.0, "sample_size": 1}, {"win_pct": 0.41250000000000003, "probability": 0.0, "sample_size": 4}, {"win_pct": 0.4375, "probability": 0.0, "sample_size": 1}, {"win_pct": 0.4625, "probability": 0.14285714285714285, "sample_size": 7}, {"win_pct": 0.5125, "probability": 0.0, "sample_size": 3}, {"win_pct": 0.5375000000000001, "probability": 0.2, "sample_size": 5}, {"win_pct": 0.5625, "probability": 0.1111111111111111, "sample_size": 9}, {"win_pct": 0.5875000000000001, "probability": 0.7, "sample_size": 10}, {"win_pct": 0.6125, "probability": 1.0, "sample_size": 2}, {"win_pct": 0.6375, "probability": 1.0, "sample_size": 3}, {"win_pct": 0.6625000000000001, "probability": 1.0, "sample_size": 2}, {"win_pct": 0.6875, "probability": 1.0, "sample_size": 7}, {"win_pct": 0.7375, "probability": 1.0, "sample_size": 2}, {"win_pct": 0.7625, "probability": 1.0, "sample_size": 1}, {"win_pct": 0.7875000000000001, "probability": 1.0, "sample_size": 3}, {"win_pct": 0.8125, "probability": 1.0, "sample_size": 3}, {"win_pct": 0.8375000000000001, "probability": 1.0, "sample_size": 1}, {"win_pct": 0.9125000000000001, "probability": 1.0, "sample_size": 2}];
        
        // Cumulative playoff data
        const cumulativePlayoffData = [{"threshold": 0.0, "playoff_percentage": 0.375, "total_teams": 96}, {"threshold": 0.01, "playoff_percentage": 0.375, "total_teams": 96}, {"threshold": 0.02, "playoff_percentage": 0.375, "total_teams": 96}, {"threshold": 0.03, "playoff_percentage": 0.375, "total_teams": 96}, {"threshold": 0.04, "playoff_percentage": 0.375, "total_teams": 96}, {"threshold": 0.05, "playoff_percentage": 0.375, "total_teams": 96}, {"threshold": 0.06, "playoff_percentage": 0.37894736842105264, "total_teams": 95}, {"threshold": 0.07, "playoff_percentage": 0.37894736842105264, "total_teams": 95}, {"threshold": 0.08, "playoff_percentage": 0.37894736842105264, "total_teams": 95}, {"threshold": 0.09, "playoff_percentage": 0.37894736842105264, "total_teams": 95}, {"threshold": 0.1, "playoff_percentage": 0.37894736842105264, "total_teams": 95}, {"threshold": 0.11, "playoff_percentage": 0.3870967741935484, "total_teams": 93}, {"threshold": 0.12, "playoff_percentage": 0.3870967741935484, "total_teams": 93}, {"threshold": 0.13, "playoff_percentage": 0.3870967741935484, "total_teams": 93}, {"threshold": 0.14, "playoff_percentage": 0.3870967741935484, "total_teams": 93}, {"threshold": 0.15, "playoff_percentage": 0.3870967741935484, "total_teams": 93}, {"threshold": 0.16, "playoff_percentage": 0.3956043956043956, "total_teams": 91}, {"threshold": 0.17, "playoff_percentage": 0.3956043956043956, "total_teams": 91}, {"threshold": 0.18, "playoff_percentage": 0.3956043956043956, "total_teams": 91}, {"threshold": 0.19, "playoff_percentage": 0.4044943820224719, "total_teams": 89}, {"threshold": 0.2, "playoff_percentage": 0.4044943820224719, "total_teams": 89}, {"threshold": 0.21, "playoff_percentage": 0.4044943820224719, "total_teams": 89}, {"threshold": 0.22, "playoff_percentage": 0.4090909090909091, "total_teams": 88}, {"threshold": 0.23, "playoff_percentage": 0.41379310344827586, "total_teams": 87}, {"threshold": 0.24, "playoff_percentage": 0.41379310344827586, "total_teams": 87}, {"threshold": 0.25, "playoff_percentage": 0.41379310344827586, "total_teams": 87}, {"threshold": 0.26, "playoff_percentage": 0.42857142857142855, "total_teams": 84}, {"threshold": 0.27, "playoff_percentage": 0.43373493975903615, "total_teams": 83}, {"threshold": 0.28, "playoff_percentage": 0.43373493975903615, "total_teams": 83}, {"threshold": 0.29, "playoff_percentage": 0.43373493975903615, "total_teams": 83}, {"threshold": 0.3, "playoff_percentage": 0.43373493975903615, "total_teams": 83}, {"threshold": 0.31, "playoff_percentage": 0.46153846153846156, "total_teams": 78}, {"threshold": 0.32, "playoff_percentage": 0.48, "total_teams": 75}, {"threshold": 0.33, "playoff_percentage": 0.48, "total_teams": 75}, {"threshold": 0.34, "playoff_percentage": 0.4864864864864865, "total_teams": 74}, {"threshold": 0.35, "playoff_percentage": 0.4864864864864865, "total_teams": 74}, {"threshold": 0.36, "playoff_percentage": 0.5142857142857142, "total_teams": 70}, {"threshold": 0.37, "playoff_percentage": 0.5454545454545454, "total_teams": 66}, {"threshold": 0.38, "playoff_percentage": 0.5454545454545454, "total_teams": 66}, {"threshold": 0.39, "playoff_percentage": 0.5538461538461539, "total_teams": 65}, {"threshold": 0.4, "playoff_percentage": 0.5538461538461539, "total_teams": 65}, {"threshold": 0.41, "playoff_percentage": 0.5714285714285714, "total_teams": 63}, {"threshold": 0.42, "playoff_percentage": 0.5714285714285714, "total_teams": 63}, {"threshold": 0.43, "playoff_percentage": 0.5901639344262295, "total_teams": 61}, {"threshold": 0.44, "playoff_percentage": 0.5901639344262295, "total_teams": 61}, {"threshold": 0.45, "playoff_percentage": 0.6, "total_teams": 60}, {"threshold": 0.46, "playoff_percentage": 0.6428571428571429, "total_teams": 56}, {"threshold": 0.47, "playoff_percentage": 0.6428571428571429, "total_teams": 56}, {"threshold": 0.48, "playoff_percentage": 0.660377358490566, "total_teams": 53}, {"threshold": 0.49, "playoff_percentage": 0.660377358490566, "total_teams": 53}, {"threshold": 0.5, "playoff_percentage": 0.660377358490566, "total_teams": 53}, {"threshold": 0.51, "playoff_percentage": 0.7, "total_teams": 50}, {"threshold": 0.52, "playoff_percentage": 0.7, "total_teams": 50}, {"threshold": 0.53, "playoff_percentage": 0.7555555555555555, "total_teams": 45}, {"threshold": 0.54, "playoff_percentage": 0.7555555555555555, "total_teams": 45}, {"threshold": 0.55, "playoff_percentage": 0.7555555555555555, "total_teams": 45}, {"threshold": 0.56, "playoff_percentage": 0.8461538461538461, "total_teams": 39}, {"threshold": 0.57, "playoff_percentage": 0.9166666666666666, "total_teams": 36}, {"threshold": 0.58, "playoff_percentage": 0.9354838709677419, "total_teams": 31}, {"threshold": 0.59, "playoff_percentage": 0.9354838709677419, "total_teams": 31}, {"threshold": 0.6, "playoff_percentage": 0.9354838709677419, "total_teams": 31}, {"threshold": 0.61, "playoff_percentage": 1.0, "total_teams": 26}, {"threshold": 0.62, "playoff_percentage": 1.0, "total_teams": 24}, {"threshold": 0.63, "playoff_percentage": 1.0, "total_teams": 22}, {"threshold": 0.64, "playoff_percentage": 1.0, "total_teams": 21}, {"threshold": 0.65, "playoff_percentage": 1.0, "total_teams": 21}, {"threshold": 0.66, "playoff_percentage": 1.0, "total_teams": 19}, {"threshold": 0.67, "playoff_percentage": 1.0, "total_teams": 19}, {"threshold": 0.68, "playoff_percentage": 1.0, "total_teams": 19}, {"threshold": 0.69, "playoff_percentage": 1.0, "total_teams": 17}, {"threshold": 0.7, "playoff_percentage": 1.0, "total_teams": 17}, {"threshold": 0.71, "playoff_percentage": 1.0, "total_teams": 12}, {"threshold": 0.72, "playoff_percentage": 1.0, "total_teams": 12}, {"threshold": 0.73, "playoff_percentage": 1.0, "total_teams": 12}, {"threshold": 0.74, "playoff_percentage": 1.0, "total_teams": 10}, {"threshold": 0.75, "playoff_percentage": 1.0, "total_teams": 10}, {"threshold": 0.76, "playoff_percentage": 1.0, "total_teams": 9}, {"threshold": 0.77, "playoff_percentage": 1.0, "total_teams": 9}, {"threshold": 0.78, "playoff_percentage": 1.0, "total_teams": 8}, {"threshold": 0.79, "playoff_percentage": 1.0, "total_teams": 6}, {"threshold": 0.8, "playoff_percentage": 1.0, "total_teams": 6}, {"threshold": 0.81, "playoff_percentage": 1.0, "total_teams": 3}, {"threshold": 0.82, "playoff_percentage": 1.0, "total_teams": 3}, {"threshold": 0.83, "playoff_percentage": 1.0, "total_teams": 3}, {"threshold": 0.84, "playoff_percentage": 1.0, "total_teams": 3}, {"threshold": 0.85, "playoff_percentage": 1.0, "total_teams": 2}, {"threshold": 0.86, "playoff_percentage": 1.0, "total_teams": 2}, {"threshold": 0.87, "playoff_percentage": 1.0, "total_teams": 2}, {"threshold": 0.88, "playoff_percentage": 1.0, "total_teams": 2}, {"threshold": 0.89, "playoff_percentage": 1.0, "total_teams": 2}, {"threshold": 0.9, "playoff_percentage": 1.0, "total_teams": 2}, {"threshold": 0.91, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.92, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.93, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.94, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.95, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.96, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.97, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.98, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 0.99, "playoff_percentage": 0, "total_teams": 0}, {"threshold": 1.0, "playoff_percentage": 0, "total_teams": 0}];
        
        // Create boxplot chart
        const boxplotCtx = document.getElementById('boxplotChart').getContext('2d');
        
        // Prepare data for mean lines and beeswarm
        const boxplotDatasets = [];
        
        boxplotData.labels.forEach((label, index) => {
            const data = boxplotData.data[index];
            
            // Vertical line for mean
            boxplotDatasets.push({
                label: label + ' (Mean)',
                data: [
                    {x: index - 0.4, y: data.mean},
                    {x: index + 0.4, y: data.mean}
                ],
                type: 'line',
                borderColor: '#2196F3',
                backgroundColor: '#2196F3',
                fill: false,
                pointRadius: 0,
                borderWidth: 3,
                showLine: true
            });
        });
        
        // Add beeswarm overlay points
        boxplotDatasets.push({
            label: 'Individual Seasons',
            data: boxplotData.beeswarm.map(point => ({
                x: point.x,
                y: point.y,
                team: point.team,
                owner: point.owner,
                year: point.year,
                record: point.record,
                rank: point.rank
            })),
            type: 'scatter',
            borderColor: 'rgba(76, 175, 80, 0.5)',
            backgroundColor: 'rgba(76, 175, 80, 0.5)',
            pointRadius: 3,
            pointHoverRadius: 5,
            pointStyle: 'circle',
            borderWidth: 0
        });
        
        // Custom plugin to add mean value annotations
        const meanAnnotationPlugin = {
            id: 'meanAnnotations',
            afterDraw: function(chart) {
                const ctx = chart.ctx;
                const chartArea = chart.chartArea;
                
                boxplotData.labels.forEach((label, index) => {
                    const mean = boxplotData.data[index].mean;
                    const x = chart.scales.x.getPixelForValue(index);
                    const y = chart.scales.y.getPixelForValue(mean);
                    
                    // Draw text annotation
                    ctx.save();
                    ctx.fillStyle = '#333';
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'bottom';
                    const text = (mean * 100).toFixed(1) + '%';
                    ctx.fillText(text, x, y - 10);
                    ctx.restore();
                });
            }
        };
        
        const boxplotChart = new Chart(boxplotCtx, {
            type: 'scatter',
            data: {
                datasets: boxplotDatasets
            },
            plugins: [meanAnnotationPlugin],
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Mean Winning Percentage by Final Rank',
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                const point = context[0];
                                // Check if this is a beeswarm point (last dataset)
                                if (point.datasetIndex === boxplotDatasets.length - 1) {
                                    const dataPoint = point.raw;
                                    return `${dataPoint.team} (${dataPoint.owner}) - ${dataPoint.year}`;
                                }
                                return boxplotData.labels[Math.round(point.parsed.x)];
                            },
                            label: function(context) {
                                // Check if this is a beeswarm point (last dataset)
                                if (context.datasetIndex === boxplotDatasets.length - 1) {
                                    const dataPoint = context.raw;
                                    return [
                                        `Record: ${dataPoint.record}`,
                                        `Win %: ${(dataPoint.y * 100).toFixed(1)}%`,
                                        `Final Rank: ${dataPoint.rank}`
                                    ];
                                }
                                
                                // This is a mean line
                                const dataPoint = boxplotData.data[Math.round(context.parsed.x)];
                                if (!dataPoint) return '';
                                
                                return `Mean: ${(dataPoint.mean * 100).toFixed(1)}% (${dataPoint.count} seasons)`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Final Rank',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        ticks: {
                            callback: function(value, index, values) {
                                return boxplotData.labels[value] || '';
                            },
                            stepSize: 1
                        },
                        grid: {
                            display: true,
                            color: 'rgba(0,0,0,0.1)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Winning Percentage',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        ticks: {
                            callback: function(value) {
                                return (value * 100).toFixed(0) + '%';
                            }
                        },
                        grid: {
                            display: true,
                            color: 'rgba(0,0,0,0.1)'
                        }
                    }
                }
            }
        });
        
        // Playoff Probability Calculator
        function updatePlayoffProbability() {
            const slider = document.getElementById('winPctSlider');
            const winPct = parseFloat(slider.value);
            
            // Update display
            document.getElementById('winPctDisplay').textContent = winPct.toFixed(1) + '%';
            
            // Find the cumulative playoff percentage for win% >= slider value
            const threshold = winPct / 100.0;
            
            // Find the closest threshold in cumulative data
            let result = { probability: 0, sample_size: 0 };
            
            for (let i = 0; i < cumulativePlayoffData.length; i++) {
                const data = cumulativePlayoffData[i];
                if (Math.abs(data.threshold - threshold) < 0.005) { // Within 0.5%
                    result = {
                        probability: data.playoff_percentage,
                        sample_size: data.total_teams
                    };
                    break;
                }
            }
            
            // If no exact match, find the closest one
            if (result.sample_size === 0) {
                let closestData = cumulativePlayoffData[0];
                let minDiff = Math.abs(cumulativePlayoffData[0].threshold - threshold);
                
                for (let i = 1; i < cumulativePlayoffData.length; i++) {
                    const diff = Math.abs(cumulativePlayoffData[i].threshold - threshold);
                    if (diff < minDiff) {
                        minDiff = diff;
                        closestData = cumulativePlayoffData[i];
                    }
                }
                
                result = {
                    probability: closestData.playoff_percentage,
                    sample_size: closestData.total_teams
                };
            }
            
            const probability = (result.probability * 100).toFixed(1);
            
            // Update probability display
            document.getElementById('playoffProbability').textContent = probability + '%';
            
            // Update color based on probability
            const probElement = document.getElementById('playoffProbability');
            if (result.probability >= 0.75) {
                probElement.style.color = '#4CAF50'; // Green
            } else if (result.probability >= 0.50) {
                probElement.style.color = '#FF9800'; // Orange
            } else if (result.probability >= 0.25) {
                probElement.style.color = '#FF5722'; // Red-orange
            } else {
                probElement.style.color = '#F44336'; // Red
            }
            
            // Update sample size and message
            if (result.sample_size > 0) {
                document.getElementById('sampleSize').textContent = 
                    `Based on ${result.sample_size} team${result.sample_size === 1 ? '' : 's'} with ‚â•${winPct.toFixed(1)}% win rate`;
            } else {
                document.getElementById('sampleSize').textContent = 'No historical data available';
            }
            
            // Update message to clarify it's for >= win%
            document.getElementById('playoffMessage').textContent = 
                `Chance of playoffs with ‚â•${winPct.toFixed(1)}% win rate`;
        }
        
        // Initialize slider
        document.getElementById('winPctSlider').addEventListener('input', updatePlayoffProbability);
        updatePlayoffProbability(); // Initial calculation
        
        // Create cumulative playoff chart
        const cumulativeCtx = document.getElementById('cumulativePlayoffChart').getContext('2d');
        
        // Prepare data for cumulative chart
        const cumulativeChartData = {
            labels: cumulativePlayoffData.map(d => (d.threshold * 100).toFixed(0)),
            datasets: [{
                label: 'Playoff Percentage',
                data: cumulativePlayoffData.map(d => d.playoff_percentage * 100),
                borderColor: '#2196F3',
                backgroundColor: 'rgba(33, 150, 243, 0.1)',
                fill: true,
                tension: 0.4,
                borderWidth: 3,
                pointRadius: 2,
                pointHoverRadius: 5,
                pointBackgroundColor: '#2196F3',
                pointBorderColor: '#fff',
                pointBorderWidth: 2
            }]
        };
        
        // Custom plugin to add annotations at key thresholds
        const cumulativeAnnotationPlugin = {
            id: 'cumulativeAnnotations',
            afterDraw: function(chart) {
                const ctx = chart.ctx;
                const chartArea = chart.chartArea;
                
                // Annotation thresholds (40%, 50%, 60%)
                const thresholds = [40, 50, 60];
                
                thresholds.forEach(threshold => {
                    // Find the corresponding data point
                    const dataPoint = cumulativePlayoffData.find(d => Math.round(d.threshold * 100) === threshold);
                    if (dataPoint) {
                        const x = chart.scales.x.getPixelForValue(threshold);
                        const y = chart.scales.y.getPixelForValue(dataPoint.playoff_percentage * 100);
                        
                        // Draw annotation
                        ctx.save();
                        
                        // Draw vertical line
                        ctx.strokeStyle = 'rgba(255, 87, 34, 0.8)';
                        ctx.lineWidth = 2;
                        ctx.setLineDash([5, 5]);
                        ctx.beginPath();
                        ctx.moveTo(x, chartArea.top);
                        ctx.lineTo(x, y);
                        ctx.stroke();
                        ctx.setLineDash([]);
                        
                        // Draw horizontal line
                        ctx.beginPath();
                        ctx.moveTo(chartArea.left, y);
                        ctx.lineTo(x, y);
                        ctx.stroke();
                        
                        // Draw point
                        ctx.fillStyle = '#FF5722';
                        ctx.strokeStyle = '#fff';
                        ctx.lineWidth = 3;
                        ctx.beginPath();
                        ctx.arc(x, y, 6, 0, 2 * Math.PI);
                        ctx.fill();
                        ctx.stroke();
                        
                        // Add text annotation
                        ctx.fillStyle = '#333';
                        ctx.font = 'bold 12px Arial';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'bottom';
                        const percentage = (dataPoint.playoff_percentage * 100).toFixed(1) + '%';
                        ctx.fillText(percentage, x, y - 15);
                        
                        // Add threshold label
                        ctx.fillStyle = '#666';
                        ctx.font = '11px Arial';
                        ctx.textBaseline = 'top';
                        ctx.fillText(threshold + '%', x, chartArea.bottom + 5);
                        
                        ctx.restore();
                    }
                });
            }
        };
        
        const cumulativeChart = new Chart(cumulativeCtx, {
            type: 'line',
            data: cumulativeChartData,
            plugins: [cumulativeAnnotationPlugin],
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Playoff Percentage for Teams with Win% ‚â• Threshold',
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return `Win Percentage ‚â• ${context[0].label}%`;
                            },
                            label: function(context) {
                                const dataIndex = context.dataIndex;
                                const totalTeams = cumulativePlayoffData[dataIndex].total_teams;
                                return [
                                    `Playoff Rate: ${context.parsed.y.toFixed(1)}%`,
                                    `Sample Size: ${totalTeams} team${totalTeams === 1 ? '' : 's'}`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Minimum Win Percentage (%)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        grid: {
                            display: true,
                            color: 'rgba(0,0,0,0.1)'
                        },
                        ticks: {
                            maxTicksLimit: 11,
                            callback: function(value, index) {
                                return value % 10 === 0 ? value + '%' : '';
                            }
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Playoff Percentage (%)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        max: 100,
                        grid: {
                            display: true,
                            color: 'rgba(0,0,0,0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                },
                elements: {
                    point: {
                        hoverRadius: 6
                    }
                }
            }
        });
    </script>
</body>
</html>